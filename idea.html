<!DOCTYPE html>
<html>
<head>
	<title>iMagine</title>
	<script src="libs/jquery.js"></script>
	<script src="libs/jquery_ui_min.js"></script>
	<script src="serversetup.js"></script>
	<script>
		//	Redirect to splash if not logged in
		if (localStorage.username == null) {
			window.location = rootaddress+"/splash.html";
		}
	</script>
	<link rel="stylesheet" type="text/css" href="styles.css">
</head>
<body>
	<div id="header_bg">
		<div id="navbar">
			<img id="logo" src="images/logo2.png"></img>
			<img id="settings" src="images/settings.png" align="left"></img>
			<img id="compose" src="images/compose.png" align="right"></img>
			<!--<img id="user" src="images/icon.png" align="right"></img>-->
		</div>
	</div>
	<div id="header_border"></div>
	<div id="content">
		<!--
			This is an example of what an idea post would look like
			
		<div id="ideapost" style="width:1024px; background-color:white; padding:40px;">
			<div id="title_idea" align="center" style="height:60px; font-size:48pt; color:#B4975A;">This is the title</div>
			<div id="username_idea" align="center" style="height:40px; font-size:28pt; color:#00A9A7;">By Ty Dang</div>
			<div id="summary_idea" align="center" style="height:40px; font-size:18pt;">Summary Goes Here</div>
			<div id="description_idea" style="font-size:12pt; padding-bottom:20px;">Electronic music is music that employs electronic musical instruments and electronic music technology in its production, an electronic musician being a musician who composes and/or performs such music. In general a distinction can be made between sound produced using electromechanical means and that produced using electronic technology.[1] Examples of electromechanical sound producing devices include the telharmonium, Hammond organ, and the electric guitar. Purely electronic sound production can be achieved using devices such as the Theremin, sound synthesizer, and computer.[2]

Electronic music was once associated almost exclusively with Western art music but from the late 1960s on the availability of affordable music technology meant that music produced using electronic means became increasingly common in the popular domain.[3] Today electronic music includes many varieties and ranges from experimental art music to popular forms such as electronic dance music.</div>
			<img src="images/comments.png" style="float:left;"></img>
			<div id="comments_count" style="color:red; float:left; padding-right:5px;">1</div>
			<img src="images/flags.png" style="float:left;"></img>
			<div id="comments_count" style="color:red; float:left; padding-right:5px;">1</div>
			<img src="images/charges.png" style="float:left;"></img>
			<div id="comments_count" style="color:red; float:left; padding-right:5px;">1</div>
			
			<div id="tags_idea" style="padding-top:20px;">Tags: tags, go, here, like this</div>
			<div id="comments_idea" style="padding-top:20px;">Comments: comments go here</div>
		</div>
		-->
		<div id="ideapost" style="width:1024px; background-color:white; padding:40px;">
		</div>
		<div id="test"></div>
	</div>
	
	<div id="popup_bg"></div>
	<div id="ideaform">
		<div style="width:100%; margin-top:10px; margin-bottom:25px; text-align:center; font-size:26pt; font-weight:bold; color:#00A9A7;">Got An Idea?</div>
		<div style="width:100%; height:1px; margin-left:1px; margin-top:-1px; background-color:#B4975A;"></div>
		<div style="font-size:18px; margin-top:10px; margin-bottom:10px;">Author: <textarea id="username_input" rows="1" cols="256" maxlength="20" style="width:256px; position:absolute; right:120px; font-size:11px;"></textarea></div>
		<div style="width:100%; height:1px; margin-left:1px; margin-top:-1px; background-color:#B4975A;"></div>
		<div style="font-size:18px; margin-top:10px; margin-bottom:10px;">Title: <textarea id="title_input" rows="1" cols="256" maxlength="20" style="width:256px; position:absolute; right:120px; font-size:11px;"></textarea></div>
		<div style="width:100%; height:1px; margin-left:1px; margin-top:-1px; background-color:#B4975A;"></div>
		<div style="font-size:18px; margin-top:10px; margin-bottom:15px;">Idea: <textarea id="summary_input" rows="1" cols="256" maxlength="140" style="width:256px; position:absolute; right:120px; font-size:11px;"></textarea></div>
		<div style="width:100%; height:1px; margin-left:1px; margin-top:-1px; background-color:#B4975A;"></div>
		<div style="font-size:18px; margin-top:10px; margin-bottom:60px;">Description: <textarea id="description_input" rows="4" cols="256" maxlength="1000" style="width:256px; position:absolute; right:120px; font-size:11px;"></textarea></div>
		<div style="width:100%; height:1px; margin-left:1px; margin-top:-1px; background-color:#B4975A;"></div>
		<div style="font-size:18px; margin-top:10px; margin-bottom:10px;">Tags: <textarea id="tags_input" rows="1" cols="256" maxlength="20" style="width:256px; position:absolute; right:120px; font-size:11px;"></textarea></div>
		<div style="width:100%; height:1px; margin-left:1px; margin-top:-1px; background-color:#B4975A;"></div>
		<div style="font-size:18px; margin-top:10px; margin-bottom:10px;">Picture: <textarea id="image_input"  rows="1" cols="256" maxlength="20" style="width:256px; position:absolute; right:120px; font-size:11px; color:red;">To Be Implemented.</textarea></div>
		<div style="width:100%; height:1px; margin-left:1px; margin-top:-1px; background-color:#B4975A;"></div>
		<div style="width:100%; height:25px; margin-top:10px; margin-bottom:10px;"><input id="ideaform_button" type="submit" style="position:absolute; right:120px;"></div>
		<div style="width:100%; height:1px; margin-left:1px; margin-top:-1px; background-color:#B4975A;"></div>
		<div id="error_input"></div>
	</div>
	
	
	
	
	
	
	
	
	<script>
		$("#logo").click(function () {
			window.location = rootaddress+"/index.html";
		});
		$("#compose").mouseover(function () {
			$(this).attr('src', 'images/compose_down.png');
		});
		$("#compose").mouseout(function () {
			$(this).attr('src', 'images/compose.png');
		});
		
		$("#compose").click(function() {
			document.getElementById("popup_bg").style.display="inline";
			document.getElementById("ideaform").style.display="inline";
		});
		$("#popup_bg").click(function() {
			document.getElementById("popup_bg").style.display="none";
			document.getElementById("ideaform").style.display="none";
		});
		
		$("#ideaform_button").click(function() {
			//	Send the form data to server.
			//	Server will see if data can be inserted into database. If so, it will insert.
			//	Server will return an error if error exists
			//	Also, do a reload of feed
			var xmlhttp = new XMLHttpRequest();
			xmlhttp.onreadystatechange = function () {
				if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
					var temp = xmlhttp.responseText;
					//var json = JSON.parse(temp);	//maybe use this in the future to do more accurate error statements
					//if (json["errno"] == "1062")
							//document.getElementById("testcontent").innerHTML = "Username already taken";
					document.getElementById("error_input").innerHTML += temp;
				}
			}
			xmlhttp.open("POST", serveraddress+"/compose", true);
			//xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
			var tempPost = "username=";
			tempPost += document.getElementById("username_input").value;
			tempPost += "&title=";
			tempPost += document.getElementById("title_input").value;
			tempPost += "&summary=";
			tempPost += document.getElementById("summary_input").value;
			tempPost += "&description=";
			tempPost += document.getElementById("description_input").value;
			xmlhttp.send(tempPost);
			
			//	Clear the form field
			document.getElementById("username_input").value = "";
			document.getElementById("title_input").value = "";
			document.getElementById("summary_input").value = "";
			document.getElementById("description_input").value = "";
			document.getElementById("tags_input").value = "";
			document.getElementById("image_input").value = "To Be Implemented.";
			document.getElementById("popup_bg").style.display="none";
			document.getElementById("ideaform").style.display="none";
		});
		
		var loadIdea = function () {
			var xmlhttp = new XMLHttpRequest();
			xmlhttp.onreadystatechange = function () {
				if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
					var temp = '{"results":';
					temp += xmlhttp.responseText;
					temp += '}';
					var json = JSON.parse(temp);
					var tempstr = "";
					
					tempstr += '	<div id="title_idea" align="center" style="height:60px; font-size:48pt; color:#B4975A;">'+json.results[0].title+'</div>';
					tempstr += '	<div id="username_idea" align="center" style="height:40px; font-size:28pt; color:#00A9A7;">By '+json.results[0].username+'</div>';
					tempstr += '	<div id="summary_idea" align="center" style="height:40px; font-size:18pt;">'+json.results[0].summary+'</div>';
					tempstr += '	<div id="description_idea" style="font-size:12pt; padding-bottom:20px;">'+json.results[0].description+'</div>';
					tempstr += '	<img src="images/comments.png" style="float:left;"></img>';
					tempstr += '	<div id="comments_count" style="color:red; float:left; padding-right:5px;">1</div>';
					tempstr += '	<img src="images/flags.png" style="float:left;"></img>';
					tempstr += '	<div id="comments_count" style="color:red; float:left; padding-right:5px;">1</div>';
					tempstr += '	<img src="images/charges.png" style="float:left;"></img>';
					tempstr += '	<div id="comments_count" style="color:red; float:left; padding-right:5px;">'+json.results[0].charges+'</div>';
					tempstr += '	<div id="tags_idea" style="padding-top:20px;">Tags: tags, go, here, like this</div>';
					tempstr += '	<div id="comments_idea" style="padding-top:20px;">Comments: comments go here</div>';
					
					document.getElementById("ideapost").innerHTML = tempstr;
				}
			}
			xmlhttp.open("POST", serveraddress+"/idea", true);
			var tempPost = "id=";
			tempPost += "" + localStorage.id;
			xmlhttp.send(tempPost);
		};
		loadIdea();
	</script>
</body>
</html>
